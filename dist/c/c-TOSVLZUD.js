import{a as Fe,b as vt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-77GH6E2D.js";import{a as we,b as Lt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-27ONPKZJ.js";import{a as ve,b as Mt,c as Me,d as Ut}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-HKVNYNP3.js";import{a as Ft}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-E7ZM3NTQ.js";import{a as Ce,b as Ct}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-K45ZXRYF.js";import{a as V,d as xe}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-2RBJCKMX.js";import{a as ye,b as bt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-TW324QB3.js";import{a as Se,g as wt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-MXQB3LDA.js";import{Cc as Le,Dc as xt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-OEL35KHV.js";import{a as g,d as H}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-EJ6UYQ42.js";import{d as G,g as Z,k as yt,r as _,s as fe}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-42TSFLLH.js";import{a as te,b as be,c as oe,e as Te}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-NIWHBXYF.js";import{r as S,v}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-HKXDGYOU.js";import{b as ie,i as St}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-US7HSDUX.js";import{f as re,g as Pt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-AG4TV67I.js";import{c as N}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-VRG4AYQX.js";import{D as s,E as T,F as P}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-VNZOBZZU.js";import{a as ee}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-MBWT6D3G.js";import{a as Pe,b as Tt}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-BHZEZWL4.js";import{b as y,c as O}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-SXBIDYQQ.js";import{c as L,e as z}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-GJYOXBH4.js";import{a as f,d as K}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-TZYDFHR2.js";var Ue,Et,It,Ht,Vt,Bt,Dt,se,ae=f(()=>{"use strict";Ue=K(ee());v();Te();Pt();H();P();Et=S("input")`
  opacity: 0;
  visibility: hidden;
  position: absolute;
  cursor: pointer;
  width: 0;
  left: 0;
`,It=e=>e.isDirectory,Ht=e=>e.isFile,Vt=(e,r)=>{let t=[],o=()=>{e.readEntries(i=>{if(i.length)t=t.concat(i),o();else return r(t)})};o()},Bt=async e=>{let r=[],t=0;return new Promise(o=>{let i=a=>{if(It(a)){let l=a.createReader();t++,Vt(l,n=>{t--,n.forEach(c=>{if(i(c),t<=0)return o(r)})})}Ht(a)&&(t++,a.file(l=>{if(t--,r.push(l),t<=0)return o(r)}))};for(let a=0;a<e.length;a++){let l=e[a].webkitGetAsEntry();l&&i(l)}})},Dt=(0,Ue.forwardRef)(({children:e,id:r="rm-file-upload",readFileData:t=!0,dropFile:o=!1,name:i,onChange:a,onChangeMultiple:l,disabled:n,textStyle:c,multiple:C,...B},D)=>{let M=async p=>{if(p.target.files)if(C)l&&l(Array.from(p.target.files));else{let b=p.target.files[0],w=t?await re(b):null;a&&a(b,w)}},U=async p=>{p.preventDefault();let b;if(C){if(p.dataTransfer?.items?.[0]&&"webkitGetAsEntry"in p.dataTransfer.items[0]?b=await Bt(p.dataTransfer.items):p.dataTransfer.files&&p.dataTransfer.files.length&&(b=Array.from(p.dataTransfer.files)),!b)return;l&&l(b)}else{let w=p.dataTransfer.files?.[0],$=t?await re(w):null;a&&a(w,$)}};return T(be,{ref:D,as:"label",htmlFor:r,disabled:n,cursor:"pointer",onDrop:p=>o&&U(p),onDragOver:p=>o&&p.preventDefault(),...c,children:[e,s(Et,{type:"file",name:i||r,id:r,style:{opacity:0,visibility:"hidden",position:"absolute",cursor:"pointer",width:0,left:0},onChange:M,multiple:!!C,disabled:n,...B})]})}),se=g.withComponent(Dt)});var Ee=f(()=>{"use strict";ae();ae()});var Rt,kt,Ie,He=f(()=>{"use strict";v();H();P();Rt=e=>s("svg",{width:64,height:64,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 4C0 1.79086 1.79086 0 4 0C6.20914 0 8 1.79086 8 4V60C8 62.2091 6.20914 64 4 64C1.79086 64 0 62.2091 0 60V4ZM56 28C56 25.7909 57.7909 24 60 24C62.2091 24 64 25.7909 64 28V36C64 38.2091 62.2091 40 60 40C57.7909 40 56 38.2091 56 36V28ZM46 18C43.7909 18 42 19.7909 42 22V42C42 44.2091 43.7909 46 46 46C48.2091 46 50 44.2091 50 42V22C50 19.7909 48.2091 18 46 18ZM28 16C28 13.7909 29.7909 12 32 12C34.2091 12 36 13.7909 36 16V48C36 50.2091 34.2091 52 32 52C29.7909 52 28 50.2091 28 48V16ZM18 6C15.7909 6 14 7.79086 14 10V54C14 56.2091 15.7909 58 18 58C20.2091 58 22 56.2091 22 54V10C22 7.79086 20.2091 6 18 6Z",fill:"#B8B8B8"})}),kt=g.withComponent(S(Rt)`
      display: block;
    `),Ie=kt});var Ve,Be=f(()=>{"use strict";Ve=(t=>(t.imageSvg="image-svg",t.imagePng="image-png",t))(Ve||{})});var jt,_t,At,De,Wt,Po,Re=f(()=>{"use strict";Be();jt=e=>e?new Promise((r,t)=>{try{let o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i=>t(i),o.readAsDataURL(e)}catch(o){t(o)}}):Promise.reject("No file data"),_t=e=>e?{"image/jpeg":"jpg","image/webp":"webp","image/png":"png","image/gif":"gif","image/svg+xml":"svg"}[e.toLowerCase()]:void 0,At=e=>new Promise((r,t)=>{let o=new Image;o.onload=()=>{(!o.width||!o.height)&&t("Unable to get image dimensions");let i={width:o.width,height:o.height};o.remove(),r(i)},o.onerror=i=>t(i),o.src=e}),De=e=>new Promise((r,t)=>{jt(e).then(o=>{At(o).then(i=>{let a={width:i.width,height:i.height,type:e.type,size:e.size,ext:_t(e.type),content:o};r(a)}).catch(i=>t(i))})}),Wt={"image-svg":{mimeType:"image/svg+xml",fileName:"uploaded-image.svg",headerRegex:/^(data:image\/svg\+xml;base64,)+/},"image-png":{mimeType:"image/png",fileName:"uploaded-image.png",headerRegex:/^(data:image\/png;base64,)+/}},Po=(e,r)=>{let t=Wt[r],o=e.replace(t.headerRegex,""),i=atob(o),a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return new File([a],t.fileName,{type:t.mimeType})}});var ke,je,_e,vo,ne=f(()=>{"use strict";O();Tt();fe();Re();z();ke=async(e,r)=>{let t=new FormData;return t.append("widgetId",r),t.append("upload",L("constructor.newUploadLimits")?e:e.slice(0,Math.min(e.size,y.SHOTS_UPLOAD_SIZE_LIMIT))),await fetch("/api/shots/upload/video",{method:"post",body:t}).then(o=>o.json())},je=(e,r)=>Pe.post("/api/shots/convert/fromurl",{videoUrl:e,widgetId:r}),_e=async(e,r)=>{let{width:t,height:o}=await De(e[0]),i=new FormData;i.append("widgetId",r),i.append("totalFilesNumber",e.length.toString()),e.sort((n,c)=>n.name.localeCompare(c.name,void 0,{numeric:!0}));let a=e.map(n=>n.name);i.append("fileOrder",JSON.stringify(a));for(let[n,c]of e.entries())i.append(`${n}.${_.getFileExt(c.name)||""}`,c);return{...await fetch("/api/shots/upload/sequence",{method:"post",body:i}).then(n=>n.json()),imageWidth:t,imageHeight:o}},vo=async()=>await fetch("/api/shots/templates").then(r=>r.json())});function Ae(e){let r=["image/png","image/jpeg"],t=/(png|jpg|jpeg)/i;if(!e.length)return{errorMsg:"No suitable files to upload. Please use JPEG or PNG files."};let o=Number(Ce.getPermissions().shots_upload_limit||0);if(e.length===1){let i=e[0];if(/^image\//.test(i.type)||r.includes(i.type)||t.test(_.getFileExt(i.name)))return{errorMsg:"Please upload single Video file or multiple Image files"};if(L("constructor.newUploadLimits")){if(i.size>o)return{errorMsg:`Video file size must be less than ${V(o)}`,uploadLimit:o}}else if(i.size>y.UPLOAD_SHOTS_SIZE_LIMIT)return{errorMsg:`Video file size must be less than ${Math.floor(y.UPLOAD_SHOTS_SIZE_LIMIT/1024/1024)} mb`,uploadLimit:o};return{validated:e}}else{let i=e.reduce((n,c)=>n+c.size,0);if(L("constructor.newUploadLimits")){if(i>o)return{errorMsg:`Total size of sequence files must be less than ${V(o)}`,uploadLimit:o}}else if(i>y.UPLOAD_SHOTS_SEQUENCE_SIZE_LIMIT)return{errorMsg:`Total size of sequence files must be less than ${Math.floor(y.UPLOAD_SHOTS_SEQUENCE_SIZE_LIMIT/1024/1024)} mb`,uploadLimit:o};let a,l=e.filter(n=>r.includes(n.type)||t.test(_.getFileExt(n.name)));if(!l.length)return{errorMsg:"No suitable files to upload. Please use JPEG or PNG files."};for(let n of l){if(a&&a!==n.type)return{errorMsg:"All image files in sequence must be of the same type"};a=n.type}return{validated:l}}}var We,ze=f(()=>{"use strict";ne();O();fe();Ct();xe();z();We=async(e,r)=>{if(e.length)return e.length===1?ke(e[0],r):_e(e,r)}});var zt,Ot,Oe,Ge=f(()=>{"use strict";v();H();P();zt=e=>T("svg",{width:8,height:8,viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[s("circle",{cx:6,cy:6,r:2,fill:"#282828"}),s("circle",{cx:2,cy:2,r:2,fill:"#282828"}),s("circle",{cx:2,cy:6,r:2,fill:"white"}),s("circle",{cx:6,cy:2,r:2,fill:"white"})]}),Ot=g.withComponent(S(zt)`
      display: block;
    `),Oe=Ot});var Gt,Zt,Ze,Ne=f(()=>{"use strict";v();H();P();Gt=e=>s("svg",{width:428,height:141,viewBox:"0 0 428 141",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:s("path",{id:"project settings 2.0",d:"M135.298 37.244C140.842 37.244 145.21 35.732 148.402 32.624C151.678 29.432 153.106 24.476 153.106 19.268C153.106 13.892 152.014 9.188 149.074 6.164C146.05 3.056 142.018 1.88 135.214 1.88H113.626V59H121.606V37.244H135.298ZM121.606 30.104V9.02H138.322C142.354 9.02 144.706 11.456 144.706 15.236V23.552C144.706 27.332 142.102 30.104 138.322 30.104H121.606ZM198.932 39.26C198.932 47.996 194.06 53.288 185.324 53.288C176.672 53.288 171.8 47.912 171.8 39.26V1.88H163.82V38.672C163.82 52.028 172.304 60.26 185.324 60.26C198.344 60.26 206.828 52.028 206.828 38.672V1.88H198.932V39.26ZM239.466 7.592C245.682 7.592 251.394 9.86 252.066 17.42H260.046C259.038 5.744 250.386 0.619996 239.466 0.619996C227.706 0.619996 219.894 7.172 219.894 15.74C219.894 24.14 224.346 29.18 233.67 31.784L244.842 34.892C250.806 36.572 253.494 39.176 253.494 44.048C253.494 50.096 247.614 53.288 240.054 53.288C232.494 53.288 226.782 50.096 225.942 42.368H217.962C218.97 54.8 228.798 60.26 240.222 60.26C251.646 60.26 261.474 53.96 261.474 43.88C261.474 34.472 255.93 30.188 246.018 27.5L236.862 24.98C230.478 23.216 227.706 21.116 227.706 15.74C227.706 10.7 232.242 7.592 239.466 7.592ZM308.367 59H316.347V1.88H308.367V26.072H281.403V1.88H273.423V59H281.403V33.212H308.367V59ZM0.447594 89.02H17.4996V139H25.4796V89.02H42.5316V81.88H0.447594V89.02ZM86.965 139H94.945V81.88H86.965V106.072H60.001V81.88H52.021V139H60.001V113.212H86.965V139ZM110.427 139H148.311V131.86H118.407V113.464H144.447V106.324H118.407V89.02H148.311V81.88H110.427V139ZM182.451 139H216.303V131.86H190.431V81.88H182.451V139ZM225.763 139H233.743V81.88H225.763V139ZM256.7 139V90.364H257.036L273.332 139H279.716L295.928 90.364H296.264V139H303.74V81.88H291.308L276.776 125.98H276.44L261.824 81.88H249.224V139H256.7ZM319.197 139H327.177V81.88H319.197V139ZM336.694 89.02H353.746V139H361.726V89.02H378.778V81.88H336.694V89.02ZM405.087 87.592C411.303 87.592 417.015 89.86 417.687 97.42H425.667C424.659 85.744 416.007 80.62 405.087 80.62C393.327 80.62 385.515 87.172 385.515 95.74C385.515 104.14 389.967 109.18 399.291 111.784L410.463 114.892C416.427 116.572 419.115 119.176 419.115 124.048C419.115 130.096 413.235 133.288 405.675 133.288C398.115 133.288 392.403 130.096 391.563 122.368H383.583C384.591 134.8 394.419 140.26 405.843 140.26C417.267 140.26 427.095 133.96 427.095 123.88C427.095 114.472 421.551 110.188 411.639 107.5L402.483 104.98C396.099 103.216 393.327 101.116 393.327 95.74C393.327 90.7 397.863 87.592 405.087 87.592Z",fill:"white"})}),Zt=g.withComponent(S(Gt)`
      display: block;
    `),Ze=Zt});function oi(){let[e]=Xt();(0,$e.useEffect)(()=>{e.show&&Z(G.Popup,{action:"impression",zone:"editor",content:le[e.type]})},[e]);let r=i=>{Z(G.Popup,{action:"click",zone:"editor",content:le[i]})},t=$t[e.type],o=typeof t=="function"?t(e.data):t;return T(Le,{showCloseButton:!0,show:e.show,onExit:()=>{Yt(e.type)},initialFocus:"#react-aria-modal-dialog",children:[s(g,{width:260,marginBottom:24,textAlign:"center",children:s(g,{marginLeft:-86,children:s(Ze,{})})}),T(g,{width:264,children:[s(te,{display:"block",textAlign:"center",color:"#808080",whiteSpace:"pre-wrap",marginBottom:24,children:o}),s(Nt,{onClick:()=>{r(e.type)},href:`${y.readymag_auth_host}/settings/#change-plan`,target:"_blank",rel:"noopener noreferrer",children:"Change plan"})]})]})}var $e,Nt,$t,le,qt,Xt,qe,Jt,Xe,Yt,Je=f(()=>{"use strict";$e=K(ee());v();St();H();Te();v();Ne();yt();xt();O();bt();xe();z();P();Nt=S(oe)`
  display: flex;
  justify-content: center;
  align-items: center;

  height: 56px;

  border-radius: 8px;

  color: ${ie.white};
  background-color: #0a85ff;

  &:hover {
    color: ${({theme:e})=>e.colors.white};
    opacity: 0.8;
  }
`,$t={default:"Upgrade your plan to proceed","more-pages":"Upgrade your plan to add more pages or delete existing pages","map-domain":"Upgrade your plan to map a domain ","map-domain-limit":`Upgrade your plan to map 
 a new domain or just remove 
 an older one`,"map-domain-limit-business":`You have exceeded the limit on 
 linked domains. Request for Extra 
 plan or remove an older domain`,"publish-limit":`To publish this project, upgrade 
 your plan or unpublish an older 
 project`,"free-publish-template-limit":`Upgrade your plan to create 
 up to 20 templates`,"convert-template-to-published-limit":()=>T(te,{children:["To change your project from",s("br",{}),"a template to a published website,",s("br",{}),"upgrade your plan or unpublish",s("br",{}),"an existing project."," ",T(oe,{textDecoration:"underline",target:"_blank",href:"https://readymag.notion.site/how-to-create-templates",color:"darkGray",css:N`
          &:hover {
            color: ${ie.darkGray};
            text-decoration: none;
          }
        `,children:["Limits vary for",s("br",{}),"templates and published sites."]})]}),widgets:`Upgrade your plan to use 
 Injected Code, Forms, Lottie and Shots`,"e-commerce-widget":`Upgrade your plan to use E-comm 
 widget or delete it from project`,"shots-widget":`Upgrade your plan to use Shots 
 widget or delete it from project`,"shots-widget-limit":e=>`Current Shots upload limit
is ${V(e?.currentLimit)}.
Upgrade your plan to increase.`,"forms-widget":`Upgrade your plan to use Forms 
 widget or delete it from project`,"code-injection":`Upgrade your plan to use Code 
 widget or delete it from project`,"upload-fonts":"Upgrade your plan to upload custom fonts","custom-seo":`Upgrade your plan to customize 
 SEO`,"custom-sharing":`Upgrade your plan to customize 
 social sharing settings`,"project-privacy":`Upgrade your plan to protect 
 projects with password`,"submit-to-examples":`Upgrade your plan to submit 
 projects to Examples`,"export-pdf":`Upgrade your plan to export 
 your projects`,"export-html":`Upgrade your plan to export 
 your projects to HTML`,"export-iframe":`Upgrade your plan to embed 
 your project as IFrame`,branding:`Upgrade your plan to switch off 
 Readymag branding for your 
 projects`,"icon-library":`Upgrade your plan to chose from all 
 shapes`,"global-colors":"Upgrade to any Team plan to use global colors","global-styles":"Upgrade to any Team plan to use global styles","global-presets":"Upgrade to any Team plan to use global presets","global-color":"Upgrade to any Team plan to use global colors","video-upload":e=>L("constructor.newUploadLimits")?`Current video file upload limit
is ${V(e?.currentLimit)}.
Upgrade your plan to increase.`:"Upgrade to Freelancer or higher to increase the video file upload limit from 6MB to 50MB","add-preset":"Upgrade your plan to add presets"},le={default:"Default","more-pages":"Pages limit","map-domain":"Domains limit","map-domain-limit":"Domains limit","map-domain-limit-business":"Domains limit","publish-limit":"Projects limit","free-publish-template-limit":"Published templates limit","convert-template-to-published-limit":"Templates limit on paid plan",widgets:"Paid widget","e-commerce-widget":"Paid widget: ecom","shots-widget":"Paid widget: shots","shots-widget-limit":"Shots limit","forms-widget":"Paid widget: forms","code-injection":"Paid widget: code injections","upload-fonts":"Fonts limit","custom-seo":"SEO","custom-sharing":"Social sharing","project-privacy":"Protect with password","submit-to-examples":"Submit to examples","export-pdf":"Blocked export","export-html":"Limited export","export-iframe":"Limited export",branding:"Readymag branding","icon-library":"Icon library","global-colors":"Global colors","global-styles":"Global styles","global-presets":"Global presets","global-color":"Global colors","video-upload":"Video uploading","add-preset":"Add preset"},qt={show:!1,type:"default"},[Xt,qe,Jt]=ye(qt),Xe=(e,r)=>{qe({show:!0,type:e,data:r})},Yt=e=>{let r=Jt();qe({...r,show:!1}),Z(G.Popup,{action:"close",zone:"editor",content:le[e]})}});function to(e){let{model:{_id:r,w:t,h:o,basePath:i,numberOfImages:a,scrollSpeed:l=1,imageWidth:n=0,imageHeight:c=0,fixed_position:C,scrollStartPoint:B="bottom",playbackType:D,startPointOffset:M,scrollDelay:U,is_full_width:p,is_full_height:b,useEasing:w=!1,fileExtension:$,pausable:Ke,byStepSpeed:et,byStepLoop:tt,byStepSpringLoop:ot,firstFrameLambdaUrl:R,webp:it},modelSave:rt}=(0,d.useContext)(Se),{model:{currentScrollOffset:q,hoverPercent:X,mouseIn:k,pageScale:J=1,viewport:st,canDirectLinkBeUsed:at,pageContentTop:nt=0,magContainerHeight:lt=0,widgetBoxTop:mt=0,isStarted:pe=!1},model:de}=(0,d.useContext)(Fe),[{isUploading:j,files:ue,url:A},E]=e.useSharedState?e.useSharedState():eo,Y=e.mode==="viewer",[pt,dt]=(0,d.useState)(!1),[ge,ut]=(0,d.useState)(!1),ce=(0,d.useRef)(null),F=(0,d.useRef)(null),gt=F.current,Q=(0,d.useRef)(null),I=Q.current,ct=(u,m)=>{if(p||b)return{w:t,h:o};let x=u<=480?u:Math.round(u*480/u),W=m*x/u;return{w:x,h:W}},ht=(0,d.useMemo)(()=>{if(R){let u=new URL(R);return u.searchParams.append("w","40"),u.toString()}},[R]);(0,d.useEffect)(()=>{i&&a&&(F.current=new ve(i,Y?a:1,$,!!it,()=>{ut(!0),e.onAllImagesLoaded&&e.onAllImagesLoaded()}),F.current.preloadFirstImage(),Q.current=new Me(ce.current,F.current,D==="mousemove"?1:0),Q.current.drawImageByIndex(0).then(()=>{e.onFirstFrameLoaded&&e.onFirstFrameLoaded()}))},[i]);let[h,ft]=(0,d.useState)(null);return(0,d.useEffect)(()=>{if(!h)return;let u=(m,x)=>m===y.widget.defaults.w&&x===y.widget.defaults.h;rt({basePath:h.basePath,imageWidth:h.imageWidth,imageHeight:h.imageHeight,numberOfImages:h.numberOfImages,fileExtension:h.fileExtension,totalSize:h.totalSize,jpeg:h.jpeg,webp:h.webp,firstFrameLambdaUrl:h.firstFrameLambdaUrl,...u(t,o)?ct(h.imageWidth||t,h.imageHeight||t):{}})},[h]),(0,d.useEffect)(()=>{let u=async()=>{try{let m;if(A&&A.length)m=await je(A,r);else{let{errorMsg:x,validated:W,uploadLimit:he}=Ae(ue);if(x||!W){E({isUploading:!1,uploadError:x}),L("constructor.newUploadLimits")?typeof he=="number"&&Xe("shots-widget-limit",{currentLimit:he}):setTimeout(()=>alert(x),0);return}m=await We(W||[],r)}m&&m.basePath&&m.imageHeight&&m.imageWidth&&m.numberOfImages&&m.totalSize&&!de.isDestroyed&&!pt?(ft({basePath:m.basePath,imageWidth:m.imageWidth,imageHeight:m.imageHeight,numberOfImages:m.numberOfImages,totalSize:m.totalSize,fileExtension:m.fileExtension,firstFrameLambdaUrl:m.firstFrameLambdaUrl,jpeg:m.jpeg,webp:m.webp}),E({isUploading:!1})):E({isUploading:!1,uploadError:"Error uploading video"})}catch{E({isUploading:!1,uploadError:"Error uploading video"})}};j&&(A||ue)&&!de.isDestroyed&&u()},[j]),(0,d.useEffect)(()=>{!Y||!F.current||(pe?F.current.startLoad():F.current.stopLoad())},[pe]),(0,d.useEffect)(()=>{if(!gt)return;let u;if(!Y)I?.drawImageByIndex(0);else if(typeof q<"u")u=Kt({currentScrollOffset:q,pageContentTop:nt,pageScale:J,magContainerHeight:lt,widgetBoxTop:mt,scrollStartPoint:B,startPointOffset:M,scrollSpeed:l,scrollDelay:U,isFixed:!!C}),I?.drawImageByIndex(u,w);else if(typeof X<"u")I?.drawImageByTimelinePercent(X,w);else if(typeof k<"u")k&&I?.startDrawingByStep(a,{speed:et,loop:tt,spring:ot}),!k&&Ke?I?.pauseDrawingByStep():k||I?.stopDrawingByStep();else return},[q,st,t,o,X,k]),(0,d.useEffect)(()=>(E({canDirectLinkBeUsed:at}),e.onFirstRender&&e.onFirstRender(),()=>{dt(!0)}),[]),T(g,{display:"flex",alignItems:"center",justifyContent:"center",backgroundRepeat:"no-repeat",css:N`
        label {
          position: absolute;
          cursor: default;
          z-index: 1001;
          width: 100%;
          height: 100%;
        }
      `,backgroundColor:e.mode!=="constructor"||i?"transparent":"lightGray",width:"100%",height:"100%",backgroundPosition:"center",className:"shots-cover",children:[!i&&e.mode==="constructor"&&!j&&s(g,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",children:s(Ie,{})}),e.mode==="constructor"&&i&&s(g,{display:"flex",position:"absolute",zIndex:1e3,backgroundImage:`url(${Oe})`,backgroundRepeat:"repeat",width:"100%",height:"100%",opacity:.4}),e.mode==="constructor"&&s(se,{id:`rm-shots-widget-file-upload-${r}`,onClick:u=>{u.preventDefault()},readFileData:!1,onChangeMultiple:u=>{E({files:u,isUploading:!0})},position:"absolute",zIndex:1001,dropFile:!j,accept:"image/png, image/jpeg, video/*, .mkv",multiple:!0}),j&&s(g,{display:"flex",position:"absolute",top:"50%",left:"50%",cursor:"default",transform:"translate(-50%, -50%)",children:s(we,{bgColor:"gray",size:"big"})}),s("canvas",{id:r,width:e.mode==="constructor"||J>1?n:Math.min(n,Math.floor(t*Ye)),height:e.mode==="constructor"||J>1?c:Math.min(c,Math.floor(o*Ye)),ref:ce,style:{objectFit:"cover",userSelect:"none",width:"100%",height:"100%",zIndex:1e3,...ge||!R?{opacity:1,visibility:e.mode==="constructor"?"inherit":"visible"}:{opacity:0,visibility:e.mode==="constructor"?"inherit":"hidden"}},children:"Your browser does not support Canvas element"})," ",R&&!ge&&s(g,{position:"absolute",left:"0",right:"0",bottom:"0",top:"0",zIndex:1001,backgroundImage:`url(${ht})`,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"})]})}var d,Ye,Qt,Qe,Kt,eo,oo,me=f(()=>{"use strict";d=K(ee());H();Lt();Ee();He();wt();Mt();Ft();ne();O();Ut();vt();ze();Ge();v();z();Je();P();Ye=window.devicePixelRatio||1,Qt={top:1,center:.5,bottom:0},Qe=10,Kt=({currentScrollOffset:e,pageContentTop:r,pageScale:t,magContainerHeight:o,widgetBoxTop:i,scrollStartPoint:a,startPointOffset:l,scrollSpeed:n,scrollDelay:c,isFixed:C})=>{let B=r/t,D=o/t,M=e/t;if(C)return Math.round((M-c)*n/Qe);let U=i+B,p=U-D,b=Qt[a],w=b*(U-p)+p+l;return Math.round((M-w)*n/Qe)},eo=[{},()=>{}];oo=to});var io=f(()=>{me();me()});export{Xe as a,oi as b,Je as c,se as d,Ee as e,Ve as f,Be as g,At as h,De as i,Po as j,Re as k,vo as l,ne as m,Ae as n,ze as o,oo as p,io as q};
