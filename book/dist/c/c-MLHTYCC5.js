import{a as w,h as v}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-VS7FRRWC.js";import{D as U,a as d,r as h}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-M4TEEAX7.js";import{a as p,b as C}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-KGGRYMSL.js";import{a as R}from"https://st-p.rmcdn1.net/e0cde9ba/dist/c/c-TZYDFHR2.js";function I(t,e){return t?e&&t.indexOf("://")===-1?e+t:t:""}function P(t){let e=p()?"":window.location.protocol+"//"+window.location.host,n=t&&t.screenshot;return n?I(w(n,1024),e||""):""}function f(t){let e=`${t.prefix||""}${t.val}${t.suffix||""}`;if(t.minLength=t.minLength||1,e.length>m){let n=Math.max(t.val.length-(e.length-m+1),t.minLength);e=`${t.prefix||""}${t.val.substring(0,n)}...${t.suffix||""}`}return e}function b(t,e,n={}){if(!t||!e||h(e)||!d(e))return{};let o=e.emptyTitle?"":e.title,i=t?t.seo&&t.seo.title?t.seo.title:t.title?t.title:"":"",c=e.description||(n.customDomain?"":j),r="",l="";n.customDomain?n.forProject?r=o||"Project":r=(o?o+" \u2014 ":"")+(i||"Page "+t.num):(n.forProject||(r=(i?"\u2018"+i+"\u2019":"Page "+t.num)+" from "),r+=r.length?`\u2018${o||"Project"}\u2019`:o||"Project",n.forProject&&e.description&&(r+=" | Readymag")),n.forProject?l=P(e.pages.find($=>$.num===1)):l=P(t);let s="";return n.customDomain?n.forProject?o?s=f({prefix:"",val:o,suffix:""}):s="Project":!o&&!i?s="Page "+t.num:!o&&i?s=f({prefix:"",val:i,suffix:""}):o&&!i?s=f({prefix:"",val:o,suffix:" \u2014 Page "+t.num}):o&&i&&(s=f({prefix:"",val:o,suffix:" \u2014 "+i,minLength:20}),s.length>m&&(s=i,s.length>m&&(s=f({prefix:"",val:i,suffix:""})))):n.forProject?o?s=f({val:o}):s="Project":!o&&!i?s=`Page ${t.num}`:!o&&i?s=f({val:i}):o&&!i?s=f({prefix:`Page ${t.num} from `,val:`\u2018${o}\u2019`}):o&&i&&(s=f({prefix:`\u2018${i}\u2019 from `,val:`\u2018${o}\u2019`,minLength:20}),s.length>m&&(s=i,s.length>m&&(s=f({val:i})))),{image:l,title:r||"",description:c||"",tweet:s}}function g(t,e,n={}){if(!t||!e||h(e)||!d(e))return{};let o=b(t,e,n),i=e.master_share_pid?e.pages.find(s=>s._id.toString()===e.master_share_pid?.toString()):void 0,c=n.forProject?e.pages.find(s=>s.num===1):t,r=i||c,l=r?.custom_shares;return l&&!h(l)&&(o.title=l.title||"",o.description=l.description||"",o.tweet=l.tweet||"",l.image?o.image=l.image:r.screenshot?o.image=P(r):o.image=""),o}function x(t,e,n={}){if(!t||!e||h(e)||!d(e))return{};let o=e.emptyTitle?"":e.title,i="",c="";return n.customDomain?t&&t.num>1?i=(o?o+" \u2014 ":"")+(t.title||"Page "+t.num):(i=o||"Project",c=e.description||""):(t&&t.num>1?i=(t.title?"\u2018"+t.title+"\u2019":"Page "+t.num)+" from ":c=e.description||j,i=o||"Project"),{title:i||"",description:c||"",keywords:""}}function k(t,e,n={}){if(!t||!e||h(e)||!d(e))return{};let o=x(t,e,n);return o.title=t.seo&&t.seo.title||o.title,o.description=t.seo&&t.seo.description||o.description,o.keywords=t.seo&&t.seo.keywords||o.keywords,o}function a(t){let e="";return/^https?:\/\//i.test(t.host)||(t.host="http://"+t.host),t.exportBasePath&&(t.host+=t.exportBasePath),/\/$/i.test(t.host)||(t.host+="/"),t.forProject?e=`${t.host}${t.customDomain&&!t.customDomainProfile?"":`${t.mag.num_id}/`}`:t.exportBasePath?e=`${t.host}${t.page.uri||t.page.num}/`:e=`${t.host}p${t.page.num_id}/`,e}function u(t,e=626,n=436){window.open(t,"sharer",`width=${e},height=${n},toolbar=0,status=0`)}function y(t){let e=g(t.page,t.mag,{forProject:t.forProject,customDomain:t.customDomain}),n=a(t),o=t.mag.emptyTitle?"":t.mag.title;if(t.publishedVersion){if(t.tp==="facebook"&&u("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n)),t.tp==="twitter"){let i;o?i=f({prefix:"I\u2019ve just published a project \u2018",val:o,suffix:"\u2019"}):i="I\u2019ve just published a Project",u("https://twitter.com/share?url="+encodeURIComponent(n)+"&text="+encodeURIComponent(i))}if(t.tp==="email"){let i=encodeURIComponent((t.mag.is_private?"private ":"")+(o?"project \u2018"+o+"\u2019":"Project")),c="mailto:",r="Check out my "+i,l="Hey, check out my new "+i+": "+n;window.location.href=c+"?subject="+r+"&body="+l}}else{if(t.tp==="facebook"&&u("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n)),t.tp==="twitter"&&u("https://twitter.com/share?url="+encodeURIComponent(n)+"&text="+encodeURIComponent(e.tweet||"")),t.tp==="gplus"&&u("https://plus.google.com/share?url="+encodeURIComponent(n)),t.tp==="pinterest"&&u("http://pinterest.com/pin/create/button/?url="+encodeURIComponent(n)+"&media="+encodeURIComponent(e.image||"")+"&description="+encodeURIComponent(e.title||"")),t.tp==="linkedin"&&u("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(n)+"&title="+encodeURIComponent(e.title||"")+(e.description?"&summary="+encodeURIComponent(e.description):""),552,460),t.tp==="email"){let i="mailto:",c="Check out "+encodeURIComponent(e.title||""),r=c+encodeURIComponent(`

`)+n;window.location.href=i+"?subject="+c+"&body="+r}if(t.tp==="report"){let i=`mailto:${t.supportMail}`,c="Report "+encodeURIComponent(n),r=encodeURIComponent("Please tell us why you are reporting this: ");window.location.href=i+"?subject="+c+"&body="+r}}}var j,m,L,D=R(()=>{"use strict";U();C();v();j="Built with Readymag\u2014a tool to design anything on the web.",m=116;L={getPageScreenshot:P,getDefaultShare:b,getFinalShare:g,getDefaultSEO:x,getFinalSEO:k,getShareUrl:a,share:y}});export{L as a,D as b};
